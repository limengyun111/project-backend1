{"version":3,"sources":["HomePage.js","api.js","Login.js","create-fetcher.js","AddFood.js","FoodManage.js","OrderManage.js","DeskManage.js","history.js","boss-manage.js","LandingPage.js","FoodCart.js","OrderSuccess.js","Register.js","App.js","serviceWorker.js","index.js"],"names":["center","display","margin","width","color","marginTop","background","borderRadius","textAlign","HomePage","style","fontSize","to","api","axios","create","baseURL","withCredentials","HorizontalLoginForm","handleSubmit","e","preventDefault","props","form","validateFields","err","values","a","post","then","res","console","log","data","code","alert","history","push","id","this","fieldsError","getFieldDecorator","getFieldsError","getFieldError","isFieldTouched","usernameError","passwordError","layout","onSubmit","height","Item","validateStatus","help","rules","required","message","prefix","type","placeholder","htmlType","disabled","Object","keys","some","field","React","Component","WrappedHorizontalLoginForm","Form","name","f","cache","clearCache","read","args","key","join","val","CollectionCreateForm","visible","onCancel","onCreate","title","okText","onOk","label","ref","passref","AddFood","imgRef","createRef","state","showModal","setState","handleCancel","handleCreate","formRef","fd","FormData","append","current","input","files","resetFields","renderAgain","saveFormRef","onClick","wrappedComponentRef","Meta","Card","size","Radio","FoodItem","useState","food","foodInfo","setFoodInfo","isModify","setModify","desc","price","category","img","status","foodprops","setprops","change","target","value","defaultValue","onChange","put","rid","foodinfo","cover","alt","src","actions","onDelete","FoodManagae","foods","setfoods","match","params","delete","get","useEffect","map","OrderItem","order","deskName","totalPrice","customCount","OrderManage","orders","socket","io","on","emit","marginLeft","length","DeskItem","did","desk","capacity","deleteDesk","AddDesk","handleOk","persist","newDesk","window","location","reload","withRouter","setDesk","setName","setNum","fetcher","createfetcher","fallback","desks","changeNum","changeName","createHashHistory","titleStyle","userinfoFetcher","createFetcher","catch","Bossinfo","info","fontFamily","listStyle","path","component","Option","Select","ButtonStyle","border","fontstyle","count","setCount","showSearch","optionFilterProp","filterOption","option","children","toLowerCase","indexOf","ButtonGroup","Button","Group","imgStyle","float","detailStyle","position","bottom","left","right","backgroundColor","cartStyle","MenuItem","onUpdate","amount","dec","calcTotalPrice","cartAry","reduce","total","item","CartDetails","CartStatus","expend","setExpend","OnplaceOrder","FoodCart","cartChange","placeOrder","cart","deskInfo","pathname","changeCount","idx","findIndex","it","slice","foodMenu","loading","close","currentAmount","currentCartItem","find","cartItem","OrderSuccess","padding","bordered","marginBottom","Register","App","exact","LandingPage","Manage","Login","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7d2de2d2.chunk.js","sourcesContent":["import React from \"react\"\r\nimport {Link} from \"react-router-dom\"\r\nimport back from \"./background.css\"\r\nconst center = {\r\n  display:\"block\",\r\n  margin:\"0 auto\",\r\n  width:\"100px\",\r\n  color:\"black\",\r\n  marginTop:\"10px\",\r\n  background:\"rgb(252, 186, 3)\",\r\n  borderRadius:\"15px\",\r\n  textAlign:\"center\",\r\n}\r\nfunction HomePage() {\r\n  return(\r\n    <div style={{fontSize:\"20px\"}}>\r\n      <Link to=\"/login\" style={center}>登录</Link>\r\n      <Link to=\"/register\" style={center}>注册</Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomePage","import axios from \"axios\"\nconst api = axios.create({\n    baseURL:\"/api\",\n    withCredentials:true,\n})\n\n\nexport default api","import React from \"react\"\r\nimport api from \"./api\";\r\nimport { Form, Icon, Input, Button } from 'antd';\r\n\r\nfunction hasErrors(fieldsError) {\r\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nclass HorizontalLoginForm extends React.Component {\r\n  componentDidMount() {\r\n    // To disabled submit button at the beginning.\r\n    this.props.form.validateFields();\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n \r\n    this.props.form.validateFields(async (err, values) => {\r\n      if (!err) {\r\n      \r\n        await api.post(\"/login\",{\r\n          \r\n          values:values\r\n        }).then((res)=>{ \r\n          console.log(\"res\",res.data)\r\n          if(res.data.code === -1){\r\n            console.log(\"code\",res.code)\r\n            alert(\"用户名或密码错误\")\r\n          }else{\r\n            this.props.history.push(`/restaurant/${res.data.id}/manage/`) \r\n          }\r\n          })\r\n      // 登录成功后跳转到manage组件\r\n    \r\n      //this.props.history.push(\"./manage\")\r\n        \r\n      } else{\r\n        alert(\"ss\")\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  render() {\r\n    const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched } = this.props.form;\r\n\r\n    // Only show error after a field is touched.\r\n    const usernameError = isFieldTouched('username') && getFieldError('username');\r\n    const passwordError = isFieldTouched('password') && getFieldError('password');\r\n    return (\r\n      <div>\r\n        <h2 style={{textAlign:\"center\",margin:\"20px\"}}>欢迎管理者登陆</h2>\r\n      <Form layout=\"inline\" onSubmit={this.handleSubmit} style={{margin:\"auto\",width:\"200px\",height:\"100px\"}}>\r\n        <Form.Item validateStatus={usernameError ? 'error' : ''} help={usernameError || ''}>\r\n          {getFieldDecorator('username', {\r\n            rules: [{ required: true, message: 'Please input your username!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              placeholder=\"Username\"\r\n            />,\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\r\n          {getFieldDecorator('password', {\r\n            rules: [{ required: true, message: 'Please input your Password!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n            />,\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" disabled={hasErrors(getFieldsError())}>\r\n            Log in\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nconst WrappedHorizontalLoginForm = Form.create({ name: 'horizontal_login' })(HorizontalLoginForm);\r\n  export default WrappedHorizontalLoginForm\r\n","export default function (f) {\n   var cache = {}\n\n   return {\n     clearCache() {\n        cache = {}\n     },\n     read(...args) {\n         var key = args.join('|')\n         if(key in cache) {\n             return cache[key]\n         } else {\n             throw f(...args).then((val) => {\n                 cache[key] = val\n             }\n             )\n         }\n     }\n   }\n}\n","import React from \"react\"\nimport { Button, Modal, Form, Input } from 'antd';\nimport api from \"./api\"\n\nconst CollectionCreateForm = Form.create({ name: 'form_in_modal' })(\n  // eslint-disable-next-line\n  class extends React.Component {\n\n    render() {\n      const { visible, onCancel, onCreate, form } = this.props;\n      const { getFieldDecorator } = form;\n      return (\n        <Modal\n          visible={visible}\n          title=\"请添加菜品\"\n          okText=\"Create\"\n          onCancel={onCancel}\n          onOk={onCreate}\n        >\n          <Form layout=\"vertical\">\n            <Form.Item label=\"菜品名称\">\n              {getFieldDecorator('name', {\n                rules: [{ required: true, message: 'Please input the title of collection!' }],\n              })(<Input />)}\n            </Form.Item>\n            <Form.Item label=\"菜品描述\">\n              {getFieldDecorator(\"dec\")(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品价格\">\n              {getFieldDecorator('price')(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品分类\">\n              {getFieldDecorator('category')(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品状态\">\n              {getFieldDecorator(\"status\")(<Input type=\"textarea\" />)}\n            </Form.Item>\n            <Form.Item label=\"菜品图片\">\n              {getFieldDecorator(\"img\")(<Input type=\"file\" ref={this.props.passref}/>)}\n            </Form.Item>     \n           \n          </Form>\n        </Modal>\n      );\n    }\n  },\n);\n\nclass AddFood extends React.Component {\n  imgRef = React.createRef()\n  \n  state = {\n    visible: false,\n  }\n\n  showModal = () => {\n    this.setState({ visible: true });\n  };\n  \n\n  handleCancel = () => {\n    this.setState({ visible: false });\n  };\n  \n  handleCreate = () => {\n\n    const { form } = this.formRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n    \n\n      console.log('Received values of form: ', values);\n      \n      var fd = new FormData()\n     \n      for(var key in values) {\n        var val = values[key]\n        \n       \n        fd.append(key,val)\n      } \n      fd.append(\"img\",this.imgRef.current.input.files[0])\n      console.log(\"img\",this.imgRef.current.input.files[0])\n     \n      console.log(\"fd\",fd)\n      api.post(\"/restaurant/1/food\",fd)\n      form.resetFields();\n      this.setState({ visible: false });\n\n    });\n  \n    this.props.renderAgain()\n  };\n\n  saveFormRef = formRef => {\n    this.formRef = formRef;\n  };\n\n  render() {\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.showModal} >\n          添加菜品\n        </Button>\n        <CollectionCreateForm\n          wrappedComponentRef={this.saveFormRef}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          onCreate={this.handleCreate}\n          renderAgain = { this.props.renderAgain }\n          passref = {this.imgRef}\n        />\n      </div>\n    );\n  }\n}\n\n\n\nexport default AddFood","import React, { useState, useEffect } from \"react\"\nimport api from \"./api\"\nimport { Card, Icon ,Button, Radio} from 'antd'\nimport  AddFood from \"./AddFood.js\"\nconst { Meta } = Card\nconst {size} = Radio\n\nfunction FoodItem (props) {\n var [foodInfo,setFoodInfo] = useState(props.food)\n var [isModify,setModify] = useState(false)\n var [foodprops,setprops] = useState({\n     name:props.food.name,\n     desc:props.food.desc,\n     price:props.food.price,\n     category:props.food.category,\n     img:null,\n     status:\"on\"\n })\n\n function change (e) {\n  setprops({\n         ...foodprops,\n         [e.target.name]:e.target.value\n     }\n     )\n }\n\n function getImg (e) {\n \n  setprops({\n    ...foodprops,\n    img: e.target.files[0]\n }\n)\n }\nfunction setOffline () {\n  api.put(\"/restaurant/:rid/food/\"+foodInfo.id,{\n    ...foodprops,\n    status:\"off\",\n  }).then((res => {\n    setFoodInfo(res.data)\n    \n  }))\n}\nfunction setOnline () {\n  api.put(\"/restaurant/:rid/food/\"+foodInfo.id,{\n    ...foodprops,\n    status:\"on\",\n  }).then((res => {\n    setFoodInfo(res.data)\n    \n  }))\n}\n \n\n function save (e) {\n    e.preventDefault()\n\n    var fd = new FormData()\n    for(var key in foodprops) {\n      var val = foodprops[key]\n      console.log(key,val)\n      fd.append(key,val)\n    }\n\n     api.put(`/restaurant/${props.food.rid}/food/` + foodInfo.id,fd).then((foodinfo) => {\n        setModify(false)\n        setFoodInfo(foodinfo.data)\n        \n     })\n     \n }\n    return (       \n         <div>\n          {!isModify?\n          <Card\n            style={{ width: 300 ,margin:40}}\n            cover={\n              <img\n                alt={ foodInfo.name }\n                src={ \"../upload/\"+foodInfo.img }\n              />\n            } \n                  \n            actions={[\n              foodInfo.status === 'on' ? \n              \n              <button onClick = { setOffline }>\n                <Icon type=\"setting\" key=\"setting\"/>\n                下架\n              </button>\n              :\n              <button onClick = { setOnline }>\n                <Icon type=\"setting\" key=\"setting\"/>\n                上架\n              </button>\n              ,\n              <button onClick={ ()=> {setModify(true)}}>\n                 <Icon type=\"edit\" key=\"edit\" />\n                 修改\n              </button>,\n              <button onClick = { () => { props.onDelete( foodInfo.id)} }>\n                 <Icon type=\"delete\" key=\"delete\" />\n                 删除\n              </button>\n              \n            ]}\n          >\n            <Meta   \n              title={ foodInfo.name }\n            />\n\n            <ul>\n            <li>\n             描述:{ foodInfo.desc }\n            </li>\n            <li>\n             价格:{ foodInfo.price }\n            </li>\n            <li>\n             分类:{ foodInfo.category }\n            </li>\n            </ul>\n          </Card> :\n          <div>\n              <form style={{ width:300,margin:20}}>\n                  菜名：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.name} \n                  onChange={change} name=\"name\"/><br/>\n                  描述：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.desc} \n                  onChange={change}\n                  name=\"desc\"/><br/>\n                  价格：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.price} \n                  onChange={change} name=\"price\"/><br/>\n                  分类：<input \n                  style={{ width:300}} type=\"text\" defaultValue={foodInfo.category} \n                  onChange={change} name=\"category\"/><br/>\n                  图片：<input type=\"file\" onChange = { getImg }\n                   name=\"img\"/><br/>\n                  <Button type=\"primary\"  size={size} onClick={ save }>完成并保存</Button>\n              </form>\n          </div>\n          }\n        </div>\n    )\n}\n\n\n\nfunction FoodManagae (props) {\n   var [foods,setfoods] = useState([])\n   var rid = props.match.params.rid\n\n   useEffect(() => {\n       api.get(`/restaurant/${rid}/food`).then(res => {\n        setfoods(res.data)\n       })\n\n   },[])\n\n   function renderAgain () {\n      api.get(`/restaurant/${rid}/food`).then(res => {\n      setfoods(res.data)\n     })\n   }\n   \n  function onDelete (id) {\n    api.delete(`/restaurant/${rid}/food`+id).then(() => {\n      api.get(`/restaurant/${rid}/food`).then(res => {\n        setfoods(res.data)\n       })\n    })\n  }\n  \n  \n   \n   return (\n       <div>\n           <div>\n               {\n                 foods.map(food => {\n                    return <FoodItem food={food} key={food.id} onDelete ={ onDelete } \n                    ></FoodItem>\n                 })\n               }\n           </div>\n           <AddFood foods={ foods } renderAgain={ renderAgain }/>\n       </div>\n   )\n}\n\nexport default FoodManagae","import React, { Component} from \"react\"\nimport io from \"socket.io-client\"\nimport api from \"./api\"\nimport { Card } from 'antd';\n\n\nfunction OrderItem(props) {\n\n  \n \n  return(\n      <div style={{margin:\"15px\"}}>\n       <Card size=\"small\" title={props.order.deskName} style={{ width: 300,margin:\"auto\" }}>\n        <p>总价格：{ props.order.totalPrice }</p>\n        <p>用餐人数：{ props.order.customCount }</p>\n        \n    </Card>\n      </div>\n  )\n}\n\nclass OrderManage extends Component{\n    constructor() {\n      super()\n      this.state={\n          orders:[]\n      }\n    }\n componentDidMount() {\n     var params = this.props.match.params\n    this.socket = io()\n\n    this.socket.on(\"connect\",() => {\n        \n        this.socket.emit(\"join restaurant\",\"restaurant:\" + params.rid)\n    })\n    this.socket.on(\"new order\",order => {\n        this.setState(state => ({\n            orders: [order,...state.orders]\n        }))\n    })\n\n    \n \n\n    api.get(`/restaurant/${params.rid}/order`).then((res) => {\n        this.setState({\n            orders:res.data\n        })\n    })\n }\n//  componentWillUnmount() {\n//     this.socket.close()\n// }\n\n\n\n  render() {\n    return(\n        <div>\n            <h3 style={{marginLeft:\"40px\",width:\"100px\"}}>订单管理</h3>\n            <div>\n            {this.state.orders.length > 0 ?\n                this.state.orders.map(order=> {\n                    return <OrderItem order={order} key={order.id}/>\n                }):\n                <div>loading...</div>\n            }\n            </div>\n        </div>\n    )\n  }\n\n}\n\n\n\n\n\n   \n\n\n\nexport default OrderManage","import React, { Suspense, useState } from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport api from \"./api\";\nimport createfetcher from \"./create-fetcher\";\nimport { Card,Modal, Button} from 'antd';\n\nfunction DeskItem(props) {\n\n\t\n\tvar did = props.desk.id\n\n\treturn (\n\t\t<div>\n\t\t\t<Card style={{ width: 300,margin:40}}>\n\t\t\t\t<p>桌名：{ props.desk.name}</p>\n\t\t\t\t<p>容纳人数：{ props.desk.capacity }</p>\n\t\t\t\t<Button size=\"small\" \n\t\t\t\tonClick={ ()=> props.deleteDesk(did) }>删除</Button>\n     </Card>\n\t\t</div>\n\t)\n}\n// 增加桌子\nclass AddDesk extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state={\n\t\t\tvisible: false,\n\t\t\tdeskName:\"\",\n\t\t\tcapacity:\"\",\n\t\t}\n\t}\n\n  \n\tshowModal = () => {\n\t  this.setState({\n\t\tvisible: true,\n\t  });\n\t};\n  \n\thandleOk = e => {\n\t\t\n\t\te.persist()\n\t\n\t  this.setState({\n\t\tvisible: false,\n\t\t})\n\t\tvar newDesk = {\n\t\t\tname:this.state.deskName,\n\t\t\tcapacity:this.state.capacity,\n\t\t}\n\t\t\n\t\t\tapi.post (`/restaurant/1/desk/`,newDesk).then(() =>{\n        window.location.reload()\n\t\t\t})\n\t\t\n\t\t\n\t};\n  \n\thandleCancel = e => {\n\t\n\t  this.setState({\n\t\tvisible: false,\n\t\t})\n\t\t\n\t};\n\t\n  \n\trender() {\n\t  return (\n\t\t<div>\n\t\t  <Button type=\"primary\" onClick={this.showModal} style={{marginLeft:40}}>\n\t\t\t增加桌子\n\t\t  </Button>\n\t\t  <Modal\n\t\t\ttitle=\"增加桌子\"\n\t\t\tvisible={this.state.visible}\n\t\t\tonOk={this.handleOk}\n\t\t\tonCancel={this.handleCancel}\n\t\t\n\t\t  >\n\t\t\n\t\t\t\t桌子名称：<input type=\"text\" value={this.state.deskName} onChange={ (e)=>{ this.setState({deskName:e.target.value}) }} \n\t\t\t/><br/><br/>\n\t\t\t\t容纳人数：<input type=\"text\" value={this.state.capacity} onChange={ (e)=>{ this.setState({capacity:e.target.value}) } }\n\t\t\t\t/>\n\t\t\n\t\t  </Modal>\n\t\t</div>\n\t  );\n\t}\n}\n  \n\n\nfunction DeskManage (props){\n\t\tvar [desks,setDesk] = useState({})\n\t\tvar [name,setName] = useState()\n\t\tvar [num,setNum] = useState()\n\t\tvar rid = props.match.params.rid\n    \n\t\tvar fetcher = createfetcher((rid)=>{\n\t\t\treturn api.get(`/restaurant/${rid}/desk`)\n\t\t})\n\t\t// var newDesk = {\n\t\t// \tname:name,\n\t\t// \tcapacity:num,\n\t\t// }\n\t// useEffect(()=> {\n\t// \tawai api.get(`/restaurant/${rid}/desk`).then(res => {\n\t// \t\tsetDesk(res.data)\n\t// \t})\n\t// },[newDesk])\n\t// async ()=>{\n\t// \tawait api.get(`/restaurant/${rid}/desk`).then(res => {\n\t// \t\tsetDesk(res.data)\n\t// \t})\n\t// }\n\n\t\t// useEffect(() =>{\n\t\t// \tapi.post (`/restaurant/${rid}/desk/`,newDesk).then(()=>{\n\t\t// \t\tapi.get(`/restaurant/${rid}/desk`).then(res => {\n\t\t// \t\t\tsetDesk(res.data)\n\t\t// \t\t})\n\t\t// \t})\n\t\t\n\t\t// },[newDesk])\n\n\n\n\tfunction deleteDesk(did) {\n\t\t\tapi.delete(`/restaurant/${rid}/desk/${did}`).then(()=> {\n\t\t\t\tapi.get(`/restaurant/${rid}/desk/`).then((res)=>{\n\t\t\t\t\tsetDesk(res.data)\n\t\t\t\t})\n\t\t\t})\n\t\t\n\t\t}\n\n\n  function DeskInfo({rid}) {\n\t\tvar desks = fetcher.read(rid).data\n\t\n\t\t\t return (\n\t\t\t\t<div>\n\t\t\t\t\t{\n\t\t\t\t\tdesks.map( desk => {\n\t\t\t\t\t\treturn <DeskItem key={ desk.id } \n\t\t\t\t\t\tdeleteDesk={deleteDesk} desk={desk}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t )\n\t }\n\t\n\t\n\t\n\t function changeNum(e) {\n\t\t setNum(e.target.value)\n\t }\n\t function changeName(e) {\n\t  setName(e.target.value)\n\t }\n \n\n\n   return (\n\t\t<div>\n\t\t\t<Suspense fallback={<div>loading...</div>}>\n\t\t\t  <DeskInfo rid={rid} />\n\t\t\t\t</Suspense>\n\t\t\t\t<AddDesk  changeNum={ changeNum } changeName={ changeName }/>\n\t\t\t\n\t\t\n\t\t<div>\n\t\t\t\n\t\t</div>\n\t\t</div>\n  )\n\t }\n\n\n\n\nexport default withRouter(DeskManage)","// 这个文件是产生一个基于当前路径的hash\nimport { createHashHistory } from 'history'\n\nconst history = createHashHistory()\n\nexport default history\n","\nimport React ,{Suspense}from \"react\";\nimport {\n\n  withRouter,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport api from \"./api\";\nimport { Button } from 'antd';\nimport createFetcher from \"./create-fetcher\"\nimport FoodManagae from \"./FoodManage\";\nimport OrderManage from \"./OrderManage\";\nimport DeskManage from \"./DeskManage\";\nimport history from './history'\nimport back from \"./background.css\"\nconst titleStyle = {\n  height:\"30px\",\n  margin:\"20px\",\n  fontSize:\"20px\",\n  textAlign:\"center\",\n  \n}\nvar userinfoFetcher = createFetcher(async function () {\n  return await api.get(\"/userinfo\").catch(()=>{\n    history.push('/login')\n  })\n  \n})\n\n  function Bossinfo () {\n  // 配合suapense获取同步获取餐厅信息\n  var info = userinfoFetcher.read().data\n  console.log(\"info\",info)\n  return  (\n    <div style={ titleStyle }>\n    欢迎 <span style={{fontFamily:\"'Comic Sans MS', cursive, sans-serif\",\n  \n  }}>{ info.title } </span>餐厅管理者登陆\n  </div>\n  )\n}\n\n\n\n\nexport default withRouter(function (props) {\n\n async function logout () {\n    await api.get(\"/logout\")\n    userinfoFetcher.clearCache()\n    props.history.push(\"/\")\n }\n \n  return (\n    \n      <div>\n        <Suspense fallback={<div>loading...</div>}>\n          <Bossinfo>  \n          </Bossinfo>\n        </Suspense>\n      \n        <nav>\n\n          <ul style={{listStyle:\"none\",width:\"200px\",margin:\"auto\",fontSize:\"20px\",color:\"yellow\"}}>\n            <li>\n              <Link style={{color:\"rgb(191, 181, 84)\"}} to=\"order\">订单管理</Link>\n            </li>\n            <li>\n              <Link style={{color:\"rgb(85, 138, 120)\"}} to=\"food\">菜品管理</Link>\n            </li>\n            <li>\n              <Link style={{color:\"rgb(125, 85, 138)\"}} to=\"desk\">桌面管理</Link>\n            </li>\n            \n              <Button  type=\"primary\" \n              onClick={ logout } size=\"large\"\n              style={{marginTop:\"20px\"}}\n              >退出</Button>\n          \n          </ul>\n        </nav>\n       \n        {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n        <Switch>\n          <Route path=\"/restaurant/:rid/manage/order\" component={OrderManage}>\n        \n          </Route>\n          <Route path=\"/restaurant/:rid/manage/food/\" component={FoodManagae}>\n          </Route>\n          <Route path=\"/restaurant/:rid/manage/desk\">\n            <DeskManage />\n       \n          </Route>\n        </Switch>\n      </div>\n  );\n}\n)\n\n\n// export default withRouter(Manage)\n\n// function Users() {\n//   return <h2>Users</h2>;\n// }\n\n","import React, { Suspense, useState} from 'react'\nimport { Button} from 'antd';\nimport { withRouter } from 'react-router-dom'\nimport { Select } from 'antd'\nimport createFetcher from \"./create-fetcher\"\nimport api from \"./api\"\nimport back from \"./background.css\"\nconst { Option } = Select;\nconst ButtonStyle = {\n  margin:\"50px auto\",\n  width:\"100px\",\n  display:\"block\",\n  background:\"rgb(252,186,3)\",\n  border:\"none\",\n}\nconst fontstyle ={\n  textAlign:\"center\",\n \n  margin:\"20px\"\n}\nfunction LandingPage ( props ) {\n  var [count,setCount] = useState(0)\n\n  var fetcher = createFetcher((did) => {\n      return api.get('/deskinfo?did=' + did)\n  })\n   \n   \n  function DeskInfo ({did}) {\n      var info = fetcher.read(did).data\n     \n\n      return (\n          <div>\n              <h2 style={fontstyle}>{info.title}</h2>\n              <h2 style={fontstyle}>{info.name}</h2>\n          </div>\n      )\n  }\n    \n    var rid = props.match.params.rid\n    var did = props.match.params.did\n\n   function onChange(value) {\n      setCount(value)\n      \n    }\n   function orderFood () {\n    props.history.push(`/r/${rid}/d/${did}/c/${count}/`)\n  }\n    \n\n    return (\n    <div>\n     <Suspense fallback={<div>loading</div>}>\n       <DeskInfo did={ did }/>\n      </Suspense>\n      <Select \n        showSearch\n        style={{ width: 200,marginLeft:90}}\n        placeholder=\"Select person count\"\n        optionFilterProp=\"children\"\n        onChange={onChange}\n        \n        \n        filterOption={(input, option) =>\n        option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        <Option value=\"1\">1</Option>\n        <Option value=\"2\">2</Option>\n        <Option value=\"4\">4</Option>\n    </Select><br/>\n    <Button type=\"primary\" style={ButtonStyle} onClick={ orderFood }>开始点餐</Button>\n    </div>\n\n)\n}\n\n\nexport default withRouter(LandingPage)","import React, { Component, useState} from 'react';\nimport {  Button, Icon, } from 'antd';\nimport api from './api';\n\nimport history from \"./history\"\nimport io from \"socket.io-client\"\n\n\nconst ButtonGroup = Button.Group\n// margin-right怎么写？？？\nconst imgStyle = {\n    float:\"left\",\n    width:\"100px\",\n    height:\"100px\",\n    borderRadius:\"10px\",\n    \n}\n// 圆角边框怎么写\nconst detailStyle = {\n\twidth:\"200px\",\n\tborder:\"1px solid\",\n\tborderRadius:\"8px\",\n\tposition:\"fixed\",\n\tbottom:\"95px\",\n\tleft:\"1px\",\n\tright:\"1px\",\n\tbackgroundColor:\"white\"\n}\nconst cartStyle = {\n    position:\"fixed\",\n    height:\"50px\",\n\t\tbottom:\"60px\",\n\t\tborder:\"1px solid\",\n\t\tborderRadius: \"10px\",\n    left:\"1px\",\n    right:\"1px\",\n    backgroundColor:\"white\"\n}\n\n\nfunction MenuItem ({food,onUpdate,amount}) {\n \n    \n    function dec () {\n\t\t\t// if(amount === 0){\n\t\t\t// \treturn\n\t\t\t// }\n      \n      onUpdate(food,amount - 1)\n    }\n    function inc () {\n      \n\t\t\tonUpdate(food,amount + 1)\n    }\n\n    return (\n    <div style={{margin:\"30px 30px\"}}> \n     <h3>{food.name}</h3>\n     <img style={ imgStyle } src={\"../upload/\"+ food.img} alt={food.name} />\n     <p>菜品描述{ food.dec }</p>\n     <p>菜品价格{ food.price }</p>\n     <div>\n     <ButtonGroup>\n      <Button onClick={ dec }>-</Button>\n      <Button>{ amount }</Button>\n      <Button onClick={ inc }>+</Button>\n    </ButtonGroup>\n     </div>\n    </div>\n\n )\n}\n\n// 因为上层组件和下层组件都要用到总价，所以抽成一个函数\nfunction calcTotalPrice(cartAry) {\n\n    return cartAry.reduce((total,item) => {\n\t\t\t \n        return total + item.food.price * item.amount\n    },0)\n}\n\nfunction CartDetails(props) {\n\tvar foods = props.foods\n\t\n\treturn(\n  <ul style={detailStyle}>\n\t\t{\n\t\t\tfoods.map(food => {\n\t\t\n\t\t\t\treturn <li key={food.food.id}>\n\t\t\t\t\t菜品名称：{food.food.name} <br/>\n\t\t\t\t\t菜品价格：{food.food.price}\n\t\t\t\t</li>\n\t\t\t})\n\t\t}\n\t</ul>\n\t\t\n\t\n\t)\n}\n\n\n\nfunction CartStatus (props) {\n var [expend,setExpend] = useState(false)\n\n var totalPrice = calcTotalPrice(props.foods)\n\n   return (\n    <div>\n\t   {expend === true ? <CartDetails foods={props.foods}/>:\"\"}\n     <div style={cartStyle}>\n        \n        <Icon type=\"shopping-cart\"  style={{ fontSize: '30px',margin:\"5px\"}}/>\n        {expend ?\n         <Button type=\"primary\" style={{margin:\"5px\"}} size=\"small\"\n         onClick = {()=> {setExpend(false)}}\n         >查看详情\n         </Button> :\n         <Button type=\"primary\" style={{margin:\"5px\"}} size=\"small\"\n         onClick = {()=> {setExpend(true)}}\n         >收起</Button>\n        }\n        \n         <Button type=\"primary\" style={{margin:\"15px\"}} size=\"small\"\n         onClick={() => { props.OnplaceOrder() }}>下单</Button>\n         <strong style={{margin:\"10px\"}}>总价：{ totalPrice }</strong>\n     </div>\n  </div>\n )\n}\n\n// 为什么这个函数不能包裹在FoodCart里面？？？\n// var fetcher = createfetcher (()=>{\n//     return api.get(\"/menu/restaurant/1\")\n// })\n\nexport default class FoodCart extends Component{\n    constructor(props) {\n\t\t\tsuper(props)\n\t\t\tthis.state={\n\t\t\t\tcart:[],\n\t\t\t\tfoodMenu:[],\n\t\t\t\tdeskInfo:{},\n\t\t    loading:false,\n\t\t\t}\n\t\t}\n\t\tcomponentWillUnmount() {\n\t\t\tthis.socket.close()\n\t\t}\n       componentDidMount() {\n\t\n\t\tvar params = this.props.match.params\n\n\t\tapi.get(\"/deskinfo?did=\" + params.did).then((res) => {\n\t\t\tthis.setState({\n\t\t\t\tdeskInfo:res.data,\n\t\t\t})\n\t\t})\n\n\t\tapi.get(\"/menu/restaurant/\"+params.rid).then(res => {\n\t\n\t\t\tthis.setState({\n\t\t\t\tfoodMenu: res.data,\n\t\t\t})\n\t\t})\n\n\t\tthis.socket = io()\n\t\tthis.socket.on(\"connect\",()=>{\n\t\t // 连接成功后告诉后端要加入哪个房间\n\t\t\n\t\tthis.socket.emit(\"join desk\",\"desk:\" + params.did)\n\t\t})\n\t\n\t\t// 后端发回已经点过的菜单\n\t\tthis.socket.on(\"cart food\",info => {\n\t\n            this.setState({\n\t\t\t\tcart:[...this.state.cart,...info]\n\t\t\t})\n\t\t})\n\t\t// 当后端订单改变的时候发送消息，前端把消息传到changeCount函数中，从而改变订单状态\n\t\t// 来自同桌的新增菜单\n    this.socket.on(\"new food\",info => {\n\t\t\t\n\t\t\tthis.changeCount(info.food,info.amount)\n\t\t})\n\n\t\tthis.socket.on(\"order success\",order => {\n\t\t\thistory.push({\n\t\t\t\tpathname: `/r/${params.rid}/d/${params.did}/order-success`,\n\t\t\t\tstate: order\n\t\t})\n\t\t})\n\n\t}\n\t\n // 当购物车改变的时候实时发送回后端\n\tcartChange= (food,amount) => {\n\t\n\t\t  var params = this.props.match.params\n\t\t\tthis.socket.emit(\"new food\",{desk:\"desk:\"+params.did,food,amount})\n\t\t\t\n\t}\n\n\t\n\tplaceOrder= () =>{\n\t\tvar params = this.props.match.params\n\t\tapi.post(`/restaurant/${params.rid}/desk/${params.did}/order`,{\n\t\t\tfoods:this.state.cart,\n\t\t\tdeskName: this.state.deskInfo.name,\n\t\t\ttotalPrice:calcTotalPrice(this.state.cart),\n\t\t\tcount:params.count,\n\t}).then((res) => {\n\t\t\thistory.push({\n\t\t\t\t\tpathname: `/r/${params.rid}/d/${params.did}/order-success`,\n\t\t\t\t\tstate: res.data,\n\t\t\t})\n\t\t\t\n\t})\n}\n\nchangeCount=(food,amount) =>{\n     \n\tvar idx = this.state.cart.findIndex(it => it.food.id === food.id)\n\tif(idx >= 0) {\n\t\tif(amount === 0) {\n\t\t    this.setState({\n\t\t\t\t\tcart: [\n\t\t\t\t\t\t...this.state.cart.slice(0,idx),\n\t\t\t\t\t\t...this.state.cart.slice(idx + 1) \n\t\t\t\t ]\n\t\t\t\t})\n\t\t} else {\n\t\t\t this.setState({\n\t\t\t\t cart: [\n\t\t\t\t ...this.state.cart.slice(0,idx),\n\t\t\t\t { food,\n\t\t\t\t\t\t amount,\n\t\t\t\t },\n\t\t\t\t ...this.state.cart.slice(idx+1)\n\t\t\t \n\t\t ]\n\t\t\t })\n }\n\t} else {\n\t this.setState({\n    cart:[\n\t\t\t...this.state.cart,\n\t\t\t{food,\n\t\t\t amount:amount\n\t\t\t}\n\t  ]\n\t })\n\t \n\t}\n\t\n}\n\n  render() {\n\t\n\t\t\n\t\t\treturn(\n\t\t\t\t<div>\n\t\t\t\t\n\t\t\t\t   <div>\n\t\t\t\t\t\t<h2 style={{margin:\"20px auto\",width:\"100px\"}}>开始点餐</h2>\n\t\t\t\t\t\t<div>\t\n\t\t\t\t\t\t\t{this.state.foodMenu.map(food => {\n\t\t\t\t\t\t\t\tvar currentAmount = 0\n\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\tvar currentCartItem = this.state.cart.find(cartItem => \n\t\t\t\t\t\t\t\tcartItem.food.id === food.id\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tif(currentCartItem) {\n\t\t\t\t\t\t\t\tcurrentAmount = currentCartItem.amount\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn  <MenuItem key={food.id} food ={food} \n\t\t\t\t\t\t\tonUpdate= {this.cartChange} amount={currentAmount}\n\t\t\t\t\t\t\t></MenuItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n               \n\t\t\t\t\t\t<CartStatus \n\t\t\t\t\t  \t foods={this.state.cart} \n\t\t\t\t\t  \t onUpdate= {this.cartChange} \n\t\t\t\t\t\t   OnplaceOrder={this.placeOrder } /> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t)\n\t\t\n\n\t\t\t// console.log(\"this.state.foodMenu\",this.state.foodMenu)\n\t\t\t// console.log(\"this.state.cart\",this.state.cart)\n      // return(\n\t\t\t// \t<div>\n\t\t\t\t\n\t\t\t// \t   <div>\n\t\t\t// \t\t\t<h2>开始点餐</h2>\n\t\t\t// \t\t\t<div>\t\n\n\t\t\t// \t\t\t\t\t{this.state.foodMenu\n\t\t\t// \t\t\t\t\t.map(food => {\n\t\t\t// \t\t\t\t\t var currentAmount = 0\n\t\t\t\t\t\t\t\n      //            var currentCartItem = this.state.cart.find(cartItem => \n\t\t\t// \t\t\t\t\t\tcartItem.food.id === food.id\n\t\t\t// \t\t\t\t\t )\n      //           if(currentCartItem) {\n\t\t\t// \t\t\t\t\t\tcurrentAmount = currentCartItem.amount\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t\treturn  <MenuItem key={food.id} food ={food} \n\t\t\t// \t\t\t\t\tonUpdate= {this.cartChange} amount={currentAmount}\n\t\t\t// \t\t\t\t\t></MenuItem>\n\t\t\t// \t\t\t\t\t})}\n\t\t\t// \t\t\t</div>\n               \n\t\t\t// \t\t\t<CartStatus foods={this.state.cart} onUpdate= {this.cartChange} OnplaceOrder={\n\t\t\t// \t\t\t\tthis.placeOrder } /> \n\t\t\t// \t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t// \t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t// )\n\t\t\t\t\t\t\n    }\n}\n\n\n\n/*\nfunction FoodCart () {\n    var params = useParams()\n    \n    var [deskInfo,setdeskInfo] = useState()\n    useEffect(() => {\n        api.get(\"/deskinfo?did=\" + params.did).then((res) => {\n          setdeskInfo(res.data)\n        })\n    },[])\n    var foods = fetcher.read().data\n    // 用来储存用户点了什么菜，点了多少份\n    \n    var [cart,setCart] = useState([])\n    console.log(cart)\n    function changeCount(food,amount) {\n     \n      var idx = cart.findIndex(it => it.food.id === food.id)\n      if(idx >= 0) {\n        if(amount === 0) {\n        \n            setCart([\n               ...cart.slice(0,idx),\n               ...cart.slice(idx + 1) \n            ])\n        } else {\n            setCart([\n            ...cart.slice(0,idx),\n            { food,\n                amount,\n            },\n            ...cart.slice(idx+1)\n          \n        ])\n     }\n      } else {\n      \n       setCart([\n           ...cart,\n           {food,\n            amount:amount\n           }\n       ])\n      }\n      \n    }\n    // 需要发送的内容\n    //   var rid = req.params.rid\n    //   var did = req.params.did\n    //   var customCount = req.body.count\n    //   var deskName = req.body.deskName\n    //   var menuDetails = JSON.stringify(req.body.foods)\n    //   var status= \"pending\" //condirmed/completed\n    //   var totalPrice = req.body.totalPrice\n    //   var timestamp = new Date().toISOString()\n    function placeOrder() {\n        api.post(`/restaurant/${params.rid}/desk/${params.did}/order`,{\n            foods:cart,\n          deskName: deskInfo.name,\n          totalPrice:calcTotalPrice(cart),\n          count:params.count,\n      }).then((res) => {\n          history.push({\n              pathname: `/r/${params.rid}/d/${params.did}/order-success`,\n              state: res.data,\n          })\n          \n      })\n    }\n    // 为什么App.js里面要写上history={},下层组件才可以接收到state???\n    return(\n        <div>\n            <h2>开始点餐</h2>\n            <div>\n                \n                {foods.map(food => {\n                  return  <MenuItem key={food.id} food ={food} \n                  changeCount={ changeCount }\n                 ></MenuItem>\n                })}\n            </div>\n           \n           <CartStatus foods={cart} onUpdate= {changeCount} OnplaceOrder={\n              placeOrder \n           } /> \n         \n        </div>\n    )\n}\n*/\n\n \n                   \n   ","import React from \"react\"\nimport { Card } from 'antd'\nfunction OrderSuccess(props) {\n\n    return (\n        <div >\n          <div style={{ background: '#ECECEC', padding: '30px',margin:\"15px\"}}>\n          <Card title=\"下单成功\" bordered={false} style={{ width: 300 }}>\n            \n            <h2>总价：{props.location.state && props.location.state.totalPrice}</h2>\n        </Card>\n  </div>\n\n\n            \n            \n        </div>\n    )\n}\n\n\nexport default OrderSuccess","import { Form, Icon, Input, Button } from 'antd';\nimport React from 'react';\nimport api from './api';\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nclass HorizontalLoginForm extends React.Component {\n  constructor(props) {\n    super(props)\n    \n  }\n  componentDidMount() {\n    // To disabled submit button at the beginning.\n    this.props.form.validateFields();\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log('Received values of form: ', values)\n        \n        api.post(\"/register\",values).then((res)=> {\n          console.log(\"res\",res.data)\n          if(res.data.code === 0){\n      \n            this.props.history.push(`/login`)\n           \n          }else{\n            alert(\"用户名已存在\")\n          }\n        })\n      }\n    });\n  };\n\n  render() {\n    const { getFieldDecorator, getFieldsError, getFieldError, isFieldTouched } = this.props.form;\n\n    // Only show error after a field is touched.\n    const usernameError = isFieldTouched('username') && getFieldError('username');\n    const passwordError = isFieldTouched('password') && getFieldError('password');\n    return (\n      <Form layout=\"inline\" onSubmit={this.handleSubmit} style={{margin:\"30px auto\",width:\"200px\"}}>\n        <h3 style={{margin:0}}>用户名 </h3>\n        <Form.Item style={{marginBottom:\"10px\"}} validateStatus={usernameError ? 'error' : ''} help={usernameError || ''}>\n          {getFieldDecorator('name', {\n            rules: [{ required: true, message: 'Please input your username!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              placeholder=\"Username\"\n            />,\n          )}\n        </Form.Item><br/>\n        <h3 style={{margin:0}}>密码 </h3>\n        <Form.Item style={{marginBottom:\"10px\"}} validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\n          {getFieldDecorator('password', {\n            rules: [{ required: true, message: 'Please input your Password!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"password\"\n              placeholder=\"Password\"\n            />,\n          )}\n        </Form.Item><br/>\n        <h3 style={{margin:0}}>餐厅名称 </h3>\n       <Form.Item style={{marginBottom:\"10px\"}} validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\n          {getFieldDecorator('title', {\n            rules: [{ required: true, message: 'Please input your Password!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"font-size\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"text\"\n              placeholder=\"Title\"\n            />,\n          )}\n        </Form.Item><br/>\n        <h3 style={{margin:0}}>邮箱 </h3>\n        <Form.Item style={{marginBottom:\"10px\"}} validateStatus={passwordError ? 'error' : ''} help={passwordError || ''}>\n          {getFieldDecorator('email', {\n            rules: [{ required: true, message: 'Please input your Email!' }],\n          })(\n            <Input\n              prefix={<Icon type=\"mail\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type=\"email\"\n              placeholder=\"Email\"\n            />,\n          )}\n        </Form.Item><br/>\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" disabled={hasErrors(getFieldsError())}>\n            注册\n          </Button>\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nconst Register = Form.create({ name: 'horizontal_login' })(HorizontalLoginForm);\n\nexport default Register","import React from 'react';\n\nimport './App.css';\nimport {Router,Route,Switch} from \"react-router-dom\"\n// import { hashHistory } from 'react-router'\n\n//用餐者和管理者使用同一个前端页面\n\n//用餐者 扫码进入,并选择人数/landing/restaurant/35/desk/20\n//       点餐页面 /restaurant/35/desk/20\n//       点餐成功页面\n\n//管理者 \n//登录\n//订单管理：manage/order  订单详情页面manage/order/35\n//菜品管理：manage/food\n//桌面管理：manage/desk\n\nimport HomePage from \"./HomePage\"\nimport Login from \"./Login\"\nimport Manage from \"./boss-manage\"\nimport LandingPage from \"./LandingPage\"\nimport FoodCart from './FoodCart'\nimport OrderSuccess from \"./OrderSuccess\"\nimport history from './history'\nimport Register from './Register'\n \n// http://10.240.253.165:3004/#/login 管理者登录页面 a a /b b/c c\n// http://10.240.253.165:3004/#/register 管理者登录页面\n// http://10.240.253.165:3004/#/landing/r/1/d/1 用餐者 登陆 私房菜餐厅\n// http://10.240.253.165:3004/#/landing/r/2/d/3 用餐者 登陆 城市餐厅\n// http://10.240.253.165:3004/#/r/3/d/5  用餐者 登陆 知味观 餐厅\n\nfunction App() {\n  return (\n    <Router history={history}>\n      <Switch>\n        \n        <Route path=\"/\" component={ HomePage } exact/> \n        <Route path=\"/landing/r/:rid/d/:did\" component={LandingPage} />\n        <Route path=\"/r/:rid/d/:did/c/:count\" component={FoodCart} />\n        {/* 点餐成功后跳转的页面 */}\n        <Route path=\"/r/:rid/d/:did/order-success\" component={OrderSuccess} />\n        \n        <Route path=\"/restaurant/:rid/manage/\" component={ Manage }/>\n        <Route path=\"/login\" component={ Login } />\n        <Route path=\"/register\" component={ Register }/>\n      </Switch>\n    </Router>\n  )\n}\n\n\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}