(this.webpackJsonprestaurant=this.webpackJsonprestaurant||[]).push([[0],{191:function(e,t,a){e.exports=a(391)},196:function(e,t,a){},197:function(e,t,a){},382:function(e,t){},385:function(e,t,a){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),l=a.n(o),c=(a(196),a(197),a(52)),i=a(37),s={display:"block",margin:"0 auto",width:"100px",color:"black",marginTop:"10px",background:"rgb(252, 186, 3)",borderRadius:"15px",textAlign:"center"};var u=function(){return r.a.createElement("div",{style:{fontSize:"20px"}},r.a.createElement(i.a,{to:"/login",style:s},"\u767b\u5f55"),r.a.createElement(i.a,{to:"/register",style:s},"\u6ce8\u518c"))},m=a(53),d=a.n(m),p=a(75),f=a(24),h=a(25),E=a(27),g=a(26),y=a(28),b=a(175),v=a.n(b).a.create({baseURL:"/api",withCredentials:!0}),k=a(394),O=a(397),x=a(10),j=a(51);var w=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,v.post("/login",{values:n}).then((function(e){console.log("res",e.data),-1===e.data.code?(console.log("code",e.code),alert("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef")):a.props.history.push("/restaurant/".concat(e.data.id,"/manage/"))}));case 3:e.next=6;break;case 5:alert("ss");case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,o=t.getFieldError,l=t.isFieldTouched,c=l("username")&&o("username"),i=l("password")&&o("password");return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center",margin:"20px"}},"\u6b22\u8fce\u7ba1\u7406\u8005\u767b\u9646"),r.a.createElement(k.a,{layout:"inline",onSubmit:this.handleSubmit,style:{margin:"auto",width:"200px",height:"100px"}},r.a.createElement(k.a.Item,{validateStatus:c?"error":"",help:c||""},a("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(k.a.Item,{validateStatus:i?"error":"",help:i||""},a("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(x.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(k.a.Item,null,r.a.createElement(j.a,{type:"primary",htmlType:"submit",disabled:(e=n(),Object.keys(e).some((function(t){return e[t]})))},"Log in"))))}}]),t}(r.a.Component),C=k.a.create({name:"horizontal_login"})(w),S=function(e){var t={};return{clearCache:function(){t={}},read:function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];var o=n.join("|");if(o in t)return t[o];throw e.apply(void 0,n).then((function(e){t[o]=e}))}}},P=a(134),F=a(29),D=a(393),I=a(398),R=a(396),z=k.a.create({name:"form_in_modal"})(function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,o=e.form.getFieldDecorator;return r.a.createElement(R.a,{visible:t,title:"\u8bf7\u6dfb\u52a0\u83dc\u54c1",okText:"Create",onCancel:a,onOk:n},r.a.createElement(k.a,{layout:"vertical"},r.a.createElement(k.a.Item,{label:"\u83dc\u54c1\u540d\u79f0"},o("name",{rules:[{required:!0,message:"Please input the title of collection!"}]})(r.a.createElement(O.a,null))),r.a.createElement(k.a.Item,{label:"\u83dc\u54c1\u63cf\u8ff0"},o("dec")(r.a.createElement(O.a,{type:"textarea"}))),r.a.createElement(k.a.Item,{label:"\u83dc\u54c1\u4ef7\u683c"},o("price")(r.a.createElement(O.a,{type:"textarea"}))),r.a.createElement(k.a.Item,{label:"\u83dc\u54c1\u5206\u7c7b"},o("category")(r.a.createElement(O.a,{type:"textarea"}))),r.a.createElement(k.a.Item,{label:"\u83dc\u54c1\u72b6\u6001"},o("status")(r.a.createElement(O.a,{type:"textarea"}))),r.a.createElement(k.a.Item,{label:"\u83dc\u54c1\u56fe\u7247"},o("img")(r.a.createElement(O.a,{type:"file",ref:this.props.passref})))))}}]),t}(r.a.Component)),M=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(E.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).imgRef=r.a.createRef(),a.state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleCreate=function(){var e=a.formRef.props.form;e.validateFields((function(t,n){if(!t){console.log("Received values of form: ",n);var r=new FormData;for(var o in n){var l=n[o];r.append(o,l)}r.append("img",a.imgRef.current.input.files[0]),console.log("img",a.imgRef.current.input.files[0]),console.log("fd",r),v.post("/restaurant/1/food",r),e.resetFields(),a.setState({visible:!1})}})),a.props.renderAgain()},a.saveFormRef=function(e){a.formRef=e},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{type:"primary",onClick:this.showModal},"\u6dfb\u52a0\u83dc\u54c1"),r.a.createElement(z,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate,renderAgain:this.props.renderAgain,passref:this.imgRef}))}}]),t}(r.a.Component);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=D.a.Meta,q=I.a.size;function U(e){var t=Object(n.useState)(e.food),a=Object(F.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(!1),i=Object(F.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)({name:e.food.name,desc:e.food.desc,price:e.food.price,category:e.food.category,img:null,status:"on"}),d=Object(F.a)(m,2),p=d[0],f=d[1];function h(e){f(N({},p,Object(P.a)({},e.target.name,e.target.value)))}return r.a.createElement("div",null,s?r.a.createElement("div",null,r.a.createElement("form",{style:{width:300,margin:20}},"\u83dc\u540d\uff1a",r.a.createElement("input",{style:{width:300},type:"text",defaultValue:o.name,onChange:h,name:"name"}),r.a.createElement("br",null),"\u63cf\u8ff0\uff1a",r.a.createElement("input",{style:{width:300},type:"text",defaultValue:o.desc,onChange:h,name:"desc"}),r.a.createElement("br",null),"\u4ef7\u683c\uff1a",r.a.createElement("input",{style:{width:300},type:"text",defaultValue:o.price,onChange:h,name:"price"}),r.a.createElement("br",null),"\u5206\u7c7b\uff1a",r.a.createElement("input",{style:{width:300},type:"text",defaultValue:o.category,onChange:h,name:"category"}),r.a.createElement("br",null),"\u56fe\u7247\uff1a",r.a.createElement("input",{type:"file",onChange:function(e){f(N({},p,{img:e.target.files[0]}))},name:"img"}),r.a.createElement("br",null),r.a.createElement(j.a,{type:"primary",size:q,onClick:function(t){t.preventDefault();var a=new FormData;for(var n in p){var r=p[n];console.log(n,r),a.append(n,r)}v.put("/restaurant/".concat(e.food.rid,"/food/")+o.id,a).then((function(e){u(!1),l(e.data)}))}},"\u5b8c\u6210\u5e76\u4fdd\u5b58"))):r.a.createElement(D.a,{style:{width:300,margin:40},cover:r.a.createElement("img",{alt:o.name,src:"../upload/"+o.img}),actions:["on"===o.status?r.a.createElement("button",{onClick:function(){v.put("/restaurant/:rid/food/"+o.id,N({},p,{status:"off"})).then((function(e){l(e.data)}))}},r.a.createElement(x.a,{type:"setting",key:"setting"}),"\u4e0b\u67b6"):r.a.createElement("button",{onClick:function(){v.put("/restaurant/:rid/food/"+o.id,N({},p,{status:"on"})).then((function(e){l(e.data)}))}},r.a.createElement(x.a,{type:"setting",key:"setting"}),"\u4e0a\u67b6"),r.a.createElement("button",{onClick:function(){u(!0)}},r.a.createElement(x.a,{type:"edit",key:"edit"}),"\u4fee\u6539"),r.a.createElement("button",{onClick:function(){e.onDelete(o.id)}},r.a.createElement(x.a,{type:"delete",key:"delete"}),"\u5220\u9664")]},r.a.createElement(T,{title:o.name}),r.a.createElement("ul",null,r.a.createElement("li",null,"\u63cf\u8ff0:",o.desc),r.a.createElement("li",null,"\u4ef7\u683c:",o.price),r.a.createElement("li",null,"\u5206\u7c7b:",o.category))))}var B=function(e){var t=Object(n.useState)([]),a=Object(F.a)(t,2),o=a[0],l=a[1],c=e.match.params.rid;function i(e){v.delete("/restaurant/".concat(c,"/food")+e).then((function(){v.get("/restaurant/".concat(c,"/food")).then((function(e){l(e.data)}))}))}return Object(n.useEffect)((function(){v.get("/restaurant/".concat(c,"/food")).then((function(e){l(e.data)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",null,o.map((function(e){return r.a.createElement(U,{food:e,key:e.id,onDelete:i})}))),r.a.createElement(M,{foods:o,renderAgain:function(){v.get("/restaurant/".concat(c,"/food")).then((function(e){l(e.data)}))}}))},L=a(42),V=a(101),_=a.n(V);function W(e){return r.a.createElement("div",{style:{margin:"15px"}},r.a.createElement(D.a,{size:"small",title:e.order.deskName,style:{width:300,margin:"auto"}},r.a.createElement("p",null,"\u603b\u4ef7\u683c\uff1a",e.order.totalPrice),r.a.createElement("p",null,"\u7528\u9910\u4eba\u6570\uff1a",e.order.customCount)))}var J=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(E.a)(this,Object(g.a)(t).call(this))).state={orders:[]},e}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;this.socket=_()(),this.socket.on("connect",(function(){e.socket.emit("join restaurant","restaurant:"+t.rid)})),this.socket.on("new order",(function(t){e.setState((function(e){return{orders:[t].concat(Object(L.a)(e.orders))}}))})),v.get("/restaurant/".concat(t.rid,"/order")).then((function(t){e.setState({orders:t.data})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",{style:{marginLeft:"40px",width:"100px"}},"\u8ba2\u5355\u7ba1\u7406"),r.a.createElement("div",null,this.state.orders.length>0?this.state.orders.map((function(e){return r.a.createElement(W,{order:e,key:e.id})})):r.a.createElement("div",null,"loading...")))}}]),t}(n.Component);function G(e){var t=e.desk.id;return r.a.createElement("div",null,r.a.createElement(D.a,{style:{width:300,margin:40}},r.a.createElement("p",null,"\u684c\u540d\uff1a",e.desk.name),r.a.createElement("p",null,"\u5bb9\u7eb3\u4eba\u6570\uff1a",e.desk.capacity),r.a.createElement(j.a,{size:"small",onClick:function(){return e.deleteDesk(t)}},"\u5220\u9664")))}var $=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){e.persist(),a.setState({visible:!1});var t={name:a.state.deskName,capacity:a.state.capacity};v.post("/restaurant/1/desk/",t).then((function(){window.location.reload()}))},a.handleCancel=function(e){a.setState({visible:!1})},a.state={visible:!1,deskName:"",capacity:""},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(j.a,{type:"primary",onClick:this.showModal,style:{marginLeft:40}},"\u589e\u52a0\u684c\u5b50"),r.a.createElement(R.a,{title:"\u589e\u52a0\u684c\u5b50",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},"\u684c\u5b50\u540d\u79f0\uff1a",r.a.createElement("input",{type:"text",value:this.state.deskName,onChange:function(t){e.setState({deskName:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("br",null),"\u5bb9\u7eb3\u4eba\u6570\uff1a",r.a.createElement("input",{type:"text",value:this.state.capacity,onChange:function(t){e.setState({capacity:t.target.value})}})))}}]),t}(r.a.Component);var H=Object(c.f)((function(e){var t=Object(n.useState)({}),a=Object(F.a)(t,2),o=(a[0],a[1]),l=Object(n.useState)(),c=Object(F.a)(l,2),i=(c[0],c[1]),s=Object(n.useState)(),u=Object(F.a)(s,2),m=(u[0],u[1]),d=e.match.params.rid,p=S((function(e){return v.get("/restaurant/".concat(e,"/desk"))}));function f(e){v.delete("/restaurant/".concat(d,"/desk/").concat(e)).then((function(){v.get("/restaurant/".concat(d,"/desk/")).then((function(e){o(e.data)}))}))}return r.a.createElement("div",null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"loading...")},r.a.createElement((function(e){var t=e.rid,a=p.read(t).data;return r.a.createElement("div",null,a.map((function(e){return r.a.createElement(G,{key:e.id,deleteDesk:f,desk:e})})))}),{rid:d})),r.a.createElement($,{changeNum:function(e){m(e.target.value)},changeName:function(e){i(e.target.value)}}),r.a.createElement("div",null))})),K=a(22),Q=Object(K.b)(),X=(a(385),{height:"30px",margin:"20px",fontSize:"20px",textAlign:"center"}),Y=S(Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/userinfo").catch((function(){Q.push("/login")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));function Z(){var e=Y.read().data;return console.log("info",e),r.a.createElement("div",{style:X},"\u6b22\u8fce ",r.a.createElement("span",{style:{fontFamily:"'Comic Sans MS', cursive, sans-serif"}},e.title," "),"\u9910\u5385\u7ba1\u7406\u8005\u767b\u9646")}var ee=Object(c.f)((function(e){function t(){return(t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/logout");case 2:Y.clearCache(),e.history.push("/");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"loading...")},r.a.createElement(Z,null)),r.a.createElement("nav",null,r.a.createElement("ul",{style:{listStyle:"none",width:"200px",margin:"auto",fontSize:"20px",color:"yellow"}},r.a.createElement("li",null,r.a.createElement(i.a,{style:{color:"rgb(191, 181, 84)"},to:"order"},"\u8ba2\u5355\u7ba1\u7406")),r.a.createElement("li",null,r.a.createElement(i.a,{style:{color:"rgb(85, 138, 120)"},to:"food"},"\u83dc\u54c1\u7ba1\u7406")),r.a.createElement("li",null,r.a.createElement(i.a,{style:{color:"rgb(125, 85, 138)"},to:"desk"},"\u684c\u9762\u7ba1\u7406")),r.a.createElement(j.a,{type:"primary",onClick:function(){return t.apply(this,arguments)},size:"large",style:{marginTop:"20px"}},"\u9000\u51fa"))),r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/restaurant/:rid/manage/order",component:J}),r.a.createElement(c.a,{path:"/restaurant/:rid/manage/food/",component:B}),r.a.createElement(c.a,{path:"/restaurant/:rid/manage/desk"},r.a.createElement(H,null))))})),te=a(395),ae=te.a.Option,ne={margin:"50px auto",width:"100px",display:"block",background:"rgb(252,186,3)",border:"none"},re={textAlign:"center",margin:"20px"};var oe=Object(c.f)((function(e){var t=Object(n.useState)(0),a=Object(F.a)(t,2),o=a[0],l=a[1],c=S((function(e){return v.get("/deskinfo?did="+e)})),i=e.match.params.rid,s=e.match.params.did;return r.a.createElement("div",null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"loading")},r.a.createElement((function(e){var t=e.did,a=c.read(t).data;return r.a.createElement("div",null,r.a.createElement("h2",{style:re},a.title),r.a.createElement("h2",{style:re},a.name))}),{did:s})),r.a.createElement(te.a,{showSearch:!0,placeholder:"Select person count",style:{width:200,margin:"auto",display:"block"},optionFilterProp:"children",onChange:function(e){l(e)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(ae,{value:"1"},"1"),r.a.createElement(ae,{value:"2"},"2"),r.a.createElement(ae,{value:"4"},"4")),r.a.createElement("br",null),r.a.createElement(j.a,{type:"primary",style:ne,onClick:function(){e.history.push("/r/".concat(i,"/d/").concat(s,"/c/").concat(o,"/"))}},"\u5f00\u59cb\u70b9\u9910"))})),le=j.a.Group,ce={float:"left",width:"100px",height:"100px",borderRadius:"10px"},ie={width:"200px",border:"1px solid",borderRadius:"8px",margin:0,left:"1px",right:"1px",backgroundColor:"white"},se={position:"static",height:"50px",width:"400px",margin:"auto",bottom:"60px",border:"1px solid",borderRadius:"10px",left:"1px",right:"1px",backgroundColor:"white"};function ue(e){var t=e.food,a=e.onUpdate,n=e.amount;return r.a.createElement("div",{style:{margin:"30px 30px"}},r.a.createElement("h3",null,t.name),r.a.createElement("img",{style:ce,src:"../upload/"+t.img,alt:t.name}),r.a.createElement("p",null,"\u83dc\u54c1\u63cf\u8ff0",t.dec),r.a.createElement("p",null,"\u83dc\u54c1\u4ef7\u683c",t.price),r.a.createElement("div",null,r.a.createElement(le,null,r.a.createElement(j.a,{onClick:function(){a(t,n-1)}},"-"),r.a.createElement(j.a,null,n),r.a.createElement(j.a,{onClick:function(){a(t,n+1)}},"+"))))}function me(e){return e.reduce((function(e,t){return e+t.food.price*t.amount}),0)}function de(e){var t=e.foods;return r.a.createElement("ul",{style:ie},t.map((function(e){return r.a.createElement("li",{key:e.food.id},"\u83dc\u54c1\u540d\u79f0\uff1a",e.food.name," ",r.a.createElement("br",null),"\u83dc\u54c1\u4ef7\u683c\uff1a",e.food.price)})))}function pe(e){var t=Object(n.useState)(!1),a=Object(F.a)(t,2),o=a[0],l=a[1],c=me(e.foods);return r.a.createElement("div",null,!0===o?r.a.createElement(de,{foods:e.foods}):"",r.a.createElement("div",{style:se},r.a.createElement(x.a,{type:"shopping-cart",style:{fontSize:"30px",margin:"5px"}}),o?r.a.createElement(j.a,{type:"primary",style:{margin:"5px"},size:"small",onClick:function(){l(!1)}},"\u67e5\u770b\u8be6\u60c5"):r.a.createElement(j.a,{type:"primary",style:{margin:"5px"},size:"small",onClick:function(){l(!0)}},"\u6536\u8d77"),r.a.createElement(j.a,{type:"primary",style:{margin:"15px"},size:"small",onClick:function(){e.OnplaceOrder()}},"\u4e0b\u5355"),r.a.createElement("strong",{style:{margin:"10px"}},"\u603b\u4ef7\uff1a",c)))}var fe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).cartChange=function(e,t){var n=a.props.match.params;a.socket.emit("new food",{desk:"desk:"+n.did,food:e,amount:t})},a.placeOrder=function(){var e=a.props.match.params;v.post("/restaurant/".concat(e.rid,"/desk/").concat(e.did,"/order"),{foods:a.state.cart,deskName:a.state.deskInfo.name,totalPrice:me(a.state.cart),count:e.count}).then((function(t){Q.push({pathname:"/r/".concat(e.rid,"/d/").concat(e.did,"/order-success"),state:t.data})}))},a.changeCount=function(e,t){var n=a.state.cart.findIndex((function(t){return t.food.id===e.id}));n>=0?0===t?a.setState({cart:[].concat(Object(L.a)(a.state.cart.slice(0,n)),Object(L.a)(a.state.cart.slice(n+1)))}):a.setState({cart:[].concat(Object(L.a)(a.state.cart.slice(0,n)),[{food:e,amount:t}],Object(L.a)(a.state.cart.slice(n+1)))}):a.setState({cart:[].concat(Object(L.a)(a.state.cart),[{food:e,amount:t}])})},a.state={cart:[],foodMenu:[],deskInfo:{},loading:!1},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;v.get("/deskinfo?did="+t.did).then((function(t){e.setState({deskInfo:t.data})})),v.get("/menu/restaurant/"+t.rid).then((function(t){e.setState({foodMenu:t.data})})),this.socket=_()(),this.socket.on("connect",(function(){e.socket.emit("join desk","desk:"+t.did)})),this.socket.on("cart food",(function(t){e.setState({cart:[].concat(Object(L.a)(e.state.cart),Object(L.a)(t))})})),this.socket.on("new food",(function(t){e.changeCount(t.food,t.amount)})),this.socket.on("order success",(function(e){Q.push({pathname:"/r/".concat(t.rid,"/d/").concat(t.did,"/order-success"),state:e})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:"20px auto",width:"100px"}},"\u5f00\u59cb\u70b9\u9910"),r.a.createElement("div",null,this.state.foodMenu.map((function(t){var a=0,n=e.state.cart.find((function(e){return e.food.id===t.id}));return n&&(a=n.amount),r.a.createElement(ue,{key:t.id,food:t,onUpdate:e.cartChange,amount:a})}))),r.a.createElement(pe,{foods:this.state.cart,onUpdate:this.cartChange,OnplaceOrder:this.placeOrder})))}}]),t}(n.Component);var he=function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{background:"#ECECEC",padding:"30px",margin:"15px"}},r.a.createElement(D.a,{title:"\u4e0b\u5355\u6210\u529f",bordered:!1,style:{width:300}},r.a.createElement("h2",null,"\u603b\u4ef7\uff1a",e.location.state&&e.location.state.totalPrice))))};var Ee=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(E.a)(this,Object(g.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||(console.log("Received values of form: ",t),v.post("/register",t).then((function(e){console.log("res",e.data),0===e.data.code?a.props.history.push("/login"):alert("\u7528\u6237\u540d\u5df2\u5b58\u5728")})))}))},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,o=t.getFieldError,l=t.isFieldTouched,c=l("username")&&o("username"),i=l("password")&&o("password");return r.a.createElement(k.a,{layout:"inline",onSubmit:this.handleSubmit,style:{margin:"30px auto",width:"200px"}},r.a.createElement("h3",{style:{margin:0}},"\u7528\u6237\u540d "),r.a.createElement(k.a.Item,{style:{marginBottom:"10px"},validateStatus:c?"error":"",help:c||""},a("name",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement("br",null),r.a.createElement("h3",{style:{margin:0}},"\u5bc6\u7801 "),r.a.createElement(k.a.Item,{style:{marginBottom:"10px"},validateStatus:i?"error":"",help:i||""},a("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(x.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement("br",null),r.a.createElement("h3",{style:{margin:0}},"\u9910\u5385\u540d\u79f0 "),r.a.createElement(k.a.Item,{style:{marginBottom:"10px"},validateStatus:i?"error":"",help:i||""},a("title",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(x.a,{type:"font-size",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"Title"}))),r.a.createElement("br",null),r.a.createElement("h3",{style:{margin:0}},"\u90ae\u7bb1 "),r.a.createElement(k.a.Item,{style:{marginBottom:"10px"},validateStatus:i?"error":"",help:i||""},a("email",{rules:[{required:!0,message:"Please input your Email!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(x.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),type:"email",placeholder:"Email"}))),r.a.createElement("br",null),r.a.createElement(k.a.Item,null,r.a.createElement(j.a,{type:"primary",htmlType:"submit",disabled:(e=n(),Object.keys(e).some((function(t){return e[t]})))},"\u6ce8\u518c")))}}]),t}(r.a.Component),ge=k.a.create({name:"horizontal_login"})(Ee);var ye=function(){return r.a.createElement(c.b,{history:Q},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",component:u,exact:!0}),r.a.createElement(c.a,{path:"/landing/r/:rid/d/:did",component:oe}),r.a.createElement(c.a,{path:"/r/:rid/d/:did/c/:count",component:fe}),r.a.createElement(c.a,{path:"/r/:rid/d/:did/order-success",component:he}),r.a.createElement(c.a,{path:"/restaurant/:rid/manage/",component:ee}),r.a.createElement(c.a,{path:"/login",component:C}),r.a.createElement(c.a,{path:"/register",component:ge})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[191,1,2]]]);
//# sourceMappingURL=main.aa122941.chunk.js.map